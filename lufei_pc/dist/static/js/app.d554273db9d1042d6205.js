webpackJsonp([1],{0:function(t,e){},"5LIk":function(t,e){},EWIa:function(t,e){},"IL0/":function(t,e,s){t.exports=s.p+"static/img/alipay2.8b93670.png"},Kmht:function(t,e,s){t.exports=s.p+"static/img/wechat.5c15f4f.png"},KwUq:function(t,e){},MPJl:function(t,e){},Mogz:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=s("VU/8")({name:"App"},i,!1,function(t){s("ymcE")},null,null).exports,n=s("/ocq"),c={name:"Header",data:function(){return{token:"",nav_list:[]}},created:function(){this.token=this.$settings.check_user_login(),this.get_nav_list()},methods:{get_nav_list:function(){var t=this;this.$axios.get(this.$settings.Host+"/home/nav/header/").then(function(e){t.nav_list=e.data}).catch(function(t){console.log(t.response)})},logoutHandle:function(){this.token="",localStorage.removeItem("user_token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("user_credit"),localStorage.removeItem("credit_rmb"),sessionStorage.removeItem("user_token"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("user_name"),sessionStorage.removeItem("user_credit"),sessionStorage.removeItem("credit_rmb"),this.$message.success("退出登录成功！")}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-box"},[s("div",{staticClass:"header"},[s("div",{staticClass:"content"},[s("div",{staticClass:"logo full-left"},[s("router-link",{attrs:{to:"/"}},[s("img",{attrs:{src:"/static/image/logo.svg",alt:""}})])],1),t._v(" "),s("ul",{staticClass:"nav full-left"},t._l(t.nav_list,function(e,a){return s("li",{key:a},[e.is_http?s("a",{attrs:{href:e.link}},[s("span",[t._v(t._s(e.name))])]):s("router-link",{attrs:{to:e.link}},[s("span",[t._v(t._s(e.name))])])],1)}),0),t._v(" "),t.token?s("div",{staticClass:"login-bar full-right"},[s("div",{staticClass:"shop-cart full-left"},[s("img",{attrs:{src:"/static/image/cart.svg",alt:""}}),t._v(" "),s("span",[s("router-link",{attrs:{to:"/cart"}},[t._v("购物车")])],1)]),t._v(" "),s("div",{staticClass:"login-box login-box1 full-left"},[s("router-link",{staticClass:"study-ceneter",attrs:{to:""}},[t._v("学习中心")]),t._v(" "),s("el-menu",{staticClass:"member el-menu-demo",attrs:{width:"200",mode:"horizontal"}},[s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("router-link",{attrs:{to:""}},[s("img",{attrs:{src:"/static/image/logo@2x.png",alt:""}})])],1),t._v(" "),s("el-menu-item",{attrs:{index:"2-1"}},[t._v("我的账户")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[s("router-link",{attrs:{to:"/my/order"}},[t._v("我的订单")])],1),t._v(" "),s("el-menu-item",{attrs:{index:"2-3"}},[t._v("我的优惠卷")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-3"}},[s("span",{on:{click:t.logoutHandle}},[t._v("退出登录")])])],2)],1)],1)]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.token,expression:"!token"}],staticClass:"login-bar full-right"},[s("div",{staticClass:"shop-cart full-left"},[s("img",{attrs:{src:"/static/image/cart.svg",alt:""}}),t._v(" "),s("span",[s("router-link",{attrs:{to:"/cart"}},[t._v("购物车")])],1)]),t._v(" "),s("div",{staticClass:"login-box login-box2 full-left"},[s("router-link",{attrs:{to:"/login"}},[s("span",[t._v("登录")])]),t._v("\n           | \n          "),s("span",{staticClass:"header-register"},[s("router-link",{attrs:{to:"/register"}},[t._v("注册")])],1)],1)])])])])},staticRenderFns:[]};var l=s("VU/8")(c,o,!1,function(t){s("nJG4")},"data-v-184c524d",null).exports,u={name:"Banner",data:function(){return{banner_list:[]}},created:function(){this.get_banner_list()},methods:{get_banner_list:function(){var t=this;this.$axios.get(this.$settings.Host+"/home/banner").then(function(e){t.banner_list=e.data}).catch(function(t){console.log(t.response)})}}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-carousel",{attrs:{height:"480px",interval:3e3,arrow:"always"}},this._l(this.banner_list,function(t,s){return e("el-carousel-item",{key:s},[e("a",{attrs:{href:t.link}},[e("img",{attrs:{src:t.image,alt:t.name}})])])}),1)},staticRenderFns:[]};var d=s("VU/8")(u,_,!1,function(t){s("lKjY")},"data-v-69196e96",null).exports,v={name:"Footer",data:function(){return{nav_list:[]}},created:function(){this.get_nav_list()},methods:{get_nav_list:function(){var t=this;this.$axios.get(this.$settings.Host+"/home/nav/footer/").then(function(e){t.nav_list=e.data}).catch(function(t){console.log(t.response)})}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("ul",t._l(t.nav_list,function(e,a){return s("li",{key:a},[e.is_http?s("a",{attrs:{href:e.link}},[t._v(t._s(e.name))]):s("router-link",{attrs:{to:e.link}},[t._v(t._s(e.name))])],1)}),0),t._v(" "),s("p",[t._v("Copyright © luffycity.com版权所有 | 京ICP备17072161号-1")])])},staticRenderFns:[]};var h=s("VU/8")(v,p,!1,function(t){s("c+mq")},"data-v-50808ee6",null).exports,m={name:"Home",data:function(){return{}},methods:{},components:{Header:l,Footer:h,Banner:d}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("Header"),this._v(" "),e("Banner"),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var f=s("VU/8")(m,g,!1,function(t){s("fpQj")},"data-v-3eb281bc",null).exports,C={name:"Login",data:function(){return{login_type:0,username:"",password:"",remember:!1}},methods:{loginHandler:function(){var t=this;this.$axios.post(this.$settings.Host+"/user/login/",{username:this.username,password:this.password}).then(function(e){console.log(e.data.token),t.remember?(sessionStorage.clear(),localStorage.user_token=e.data.token,localStorage.user_id=e.data.id,localStorage.user_name=e.data.username,localStorage.user_credit=e.data.user_credit,localStorage.credit_rmb=e.data.credit_rmb):(localStorage.clear(),sessionStorage.user_token=e.data.token,sessionStorage.user_id=e.data.id,sessionStorage.user_name=e.data.username,sessionStorage.user_credit=e.data.user_credit,sessionStorage.credit_rmb=e.data.credit_rmb);var s=t;t.$alert("欢迎回来！","路飞学城",{callback:function(){s.$router.go(-1)}})}).catch(function(e){400==e.response.status?t.$message.error("登录失败！账号或密码错误！"):t.$message.error("登录过程中遇到了未知错误！请联系站点管理员或客服人员！")})},get_captcha:function(){var t=this;this.username.length<1||this.password.length<1?this.$message.error("对不起，账号或密码不能为空！"):this.$axios.get(this.$settings.Host+"/user/capcha/").then(function(e){var s=JSON.parse(e.data);initGeetest({gt:s.gt,challenge:s.challenge,product:"popup",offline:!s.success},t.handlerPopup)}).catch(function(e){t.$message.error("请求验证码错误！请联系网站客服工作人员！")})},handlerPopup:function(t){var e=this;t.onSuccess(function(){var s=t.getValidate();e.$axios.post(e.$settings.Host+"/user/capcha/",{geetest_challenge:s.geetest_challenge,geetest_validate:s.geetest_validate,geetest_seccode:s.geetest_seccode}).then(function(t){t.data.status?e.loginHandler():e.$message.error("对不起，验证码校验失败！")})}),document.getElementById("geetest1").innerHTML="",t.appendTo("#geetest1")}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login box"},[s("img",{attrs:{src:"/static/image/Loginbg.3377d0c.jpg",alt:""}}),t._v(" "),s("div",{staticClass:"login"},[t._m(0),t._v(" "),s("div",{staticClass:"login_box"},[s("div",{staticClass:"title"},[s("span",{on:{click:function(e){t.login_type=0}}},[t._v("密码登录")]),t._v(" "),s("span",{on:{click:function(e){t.login_type=1}}},[t._v("短信登录")])]),t._v(" "),0==t.login_type?s("div",{staticClass:"inp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"user",attrs:{type:"text",placeholder:"用户名 / 手机号码"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"pwd",attrs:{type:"password",name:"",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("div",{attrs:{id:"geetest1"}}),t._v(" "),s("div",{staticClass:"rember"},[s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.remember,expression:"remember"}],staticClass:"no",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.remember)?t._i(t.remember,null)>-1:t.remember},on:{change:function(e){var s=t.remember,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&(t.remember=s.concat([null])):r>-1&&(t.remember=s.slice(0,r).concat(s.slice(r+1)))}else t.remember=i}}}),t._v(" "),s("span",[t._v("记住密码")])]),t._v(" "),s("p",[t._v("忘记密码")])]),t._v(" "),s("button",{staticClass:"login_btn",on:{click:t.get_captcha}},[t._v("登录")]),t._v(" "),s("p",{staticClass:"go_login"},[t._v("没有账号 "),s("router-link",{attrs:{to:"/register"}},[t._v("立即注册")])],1)]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.login_type,expression:"login_type==1"}],staticClass:"inp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"user",attrs:{type:"text",placeholder:"手机号码"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"pwd",attrs:{type:"text",placeholder:"短信验证码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("button",{attrs:{id:"get_code"}},[t._v("获取验证码")]),t._v(" "),s("button",{staticClass:"login_btn"},[t._v("登录")]),t._v(" "),s("p",{staticClass:"go_login"},[t._v("没有账号 "),s("router-link",{attrs:{to:"/register"}},[t._v("立即注册")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-title"},[e("img",{attrs:{src:"/static/image/Logotitle.1ba5466.png",alt:""}}),this._v(" "),e("p",[this._v("帮助有志向的年轻人通过努力学习获得体面的工作和生活!")])])}]};var y=s("VU/8")(C,b,!1,function(t){s("iAV8")},"data-v-a7610800",null).exports,x={name:"Register",data:function(){return{sms:"",mobile:"",password:"",interval_text:"点击发送短信",is_send_interval:!1}},created:function(){},methods:{check_mobile:function(){var t=this;/^1[3-9]\d{9}$/.test(this.mobile)?this.$axios.get(this.$settings.Host+"/user/mobile/"+this.mobile+"/").then(function(t){}).catch(function(e){400===e.response.status?t.$message.error("对不起，当前手机已被注册！"):t.$message.error("网络异常，请联系网站客服工作人员！")}):this.$message.error("对不起，手机号格式不正确！")},smsHandle:function(){var t=this;this.is_send_interval?this.$message.error("请不要频繁点击发送短信！"):this.$axios.get(this.$settings.Host+"/user/sms/"+this.mobile+"/").then(function(e){if(e.data.status){t.$message.success("短信已发送，请注意留意您的手机！"),t.is_send_interval=!0;var s=60,a=setInterval(function(){s<1?(t.interval_text="点击发送短信",t.is_send_interval=!1,clearInterval(a)):(s--,t.interval_text=s+"后点击重新发送")},1e3)}}).catch(function(e){t.$message.error("对不起，发送短信失败！")})},registerHandle:function(){var t=this;this.$axios.post(this.$settings.Host+"/user/",{mobile:this.mobile,sms_code:this.sms,password:this.password}).then(function(e){if(201===e.status){sessionStorage.user_token=e.data.token,sessionStorage.user_id=e.data.id,sessionStorage.user_name=e.data.username,sessionStorage.user_credit=e.data.user_credit,sessionStorage.credit_rmb=e.data.credit_rmb;var s=t;t.$alert("注册成功！","路飞学城",{callback:function(){s.$router.push("/")}})}else t.$message.error("对不起，注册用户失败！请重新注册或联系网站客服工作人员！")}).catch(function(e){t.$message.error("对不起，注册用户失败！请重新注册或联系网站客服工作人员！")})}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("img",{attrs:{src:"/static/image/Loginbg.3377d0c.jpg",alt:""}}),t._v(" "),s("div",{staticClass:"register"},[t._m(0),t._v(" "),s("div",{staticClass:"register_box"},[s("div",{staticClass:"register-title"},[t._v("注册路飞学城")]),t._v(" "),s("div",{staticClass:"inp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],staticClass:"user",attrs:{type:"text",placeholder:"手机号码"},domProps:{value:t.mobile},on:{blur:t.check_mobile,input:function(e){e.target.composing||(t.mobile=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"user",attrs:{type:"password",placeholder:"输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("div",{staticClass:"sms-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sms,expression:"sms"}],staticClass:"user",attrs:{type:"text",placeholder:"输入验证码"},domProps:{value:t.sms},on:{input:function(e){e.target.composing||(t.sms=e.target.value)}}}),t._v(" "),s("div",{staticClass:"sms-btn",on:{click:t.smsHandle}},[t._v(t._s(t.interval_text))])]),t._v(" "),s("div",{attrs:{id:"geetest"}}),t._v(" "),s("button",{staticClass:"register_btn",on:{click:t.registerHandle}},[t._v("注册")]),t._v(" "),s("p",{staticClass:"go_login"},[t._v("已有账号 "),s("router-link",{attrs:{to:"/login"}},[t._v("直接登录")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-title"},[e("img",{attrs:{src:"/static/image/Logotitle.1ba5466.png",alt:""}}),this._v(" "),e("p",[this._v("帮助有志向的年轻人通过努力学习获得体面的工作和生活!")])])}]};var $=s("VU/8")(x,k,!1,function(t){s("UplI")},"data-v-4730278b",null).exports,w={name:"Course",data:function(){return{filters:{page:1,size:5,category:0,ordering:"id"},category_list:[],course_total:0,course_list:[{teacher:{}}]}},created:function(){this.get_course_category(),this.get_course()},watch:{"filters.category":function(){this.filters.page=1,this.get_course()},"filters.ordering":function(){this.get_course()},"filters.page":function(){this.get_course()},"filters.size":function(){this.filters.page=1}},methods:{get_course_category:function(){var t=this;this.$axios.get(this.$settings.Host+"/courses/category/").then(function(e){t.category_list=e.data}).catch(function(e){t.$message.error("无法获取课程分类信息！")})},get_course:function(){var t=this,e={ordering:this.filters.ordering};0!=this.filters.category&&(e.course_category=this.filters.category),e.page=this.filters.page,e.size=this.filters.size,this.$axios.get(this.$settings.Host+"/courses/",{params:e}).then(function(e){t.course_list=e.data.results,t.course_total=e.data.count}).catch(function(e){t.$message.error("无法获取课程信息！")})},select_ordering:function(t){"id"==t?"id"==this.filters.ordering?this.filters.ordering="-id":this.filters.ordering="id":"students"==t?"students"==this.filters.ordering?this.filters.ordering="-students":this.filters.ordering="students":"price"==t&&("price"==this.filters.ordering?this.filters.ordering="-price":this.filters.ordering="price")},handleCurrentChange:function(t){this.filters.page=t},handleSizeChange:function(t){this.filters.size=t}},components:{Header:l,Footer:h}},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course"},[s("Header"),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"condition"},[s("ul",{staticClass:"cate-list"},[s("li",{staticClass:"title"},[t._v("课程分类:")]),t._v(" "),s("li",{class:0==t.filters.category?"this":"",on:{click:function(e){t.filters.category=0}}},[t._v("全部")]),t._v(" "),t._l(t.category_list,function(e){return s("li",{class:t.filters.category==e.id?"this":"",on:{click:function(s){t.filters.category=e.id}}},[t._v(t._s(e.name))])})],2),t._v(" "),s("div",{staticClass:"ordering"},[s("ul",[s("li",{staticClass:"title"},[t._v("筛        选: ")]),t._v(" "),s("li",{staticClass:"default",class:"id"==t.filters.ordering?"this asc":"-id"==t.filters.ordering?"this desc":"",on:{click:function(e){return t.select_ordering("id")}}},[t._v("默认")]),t._v(" "),s("li",{staticClass:"hot",class:"students"==t.filters.ordering?"this asc":"-students"==t.filters.ordering?"this desc":"",on:{click:function(e){return t.select_ordering("students")}}},[t._v("人气")]),t._v(" "),s("li",{staticClass:"price",class:"price"==t.filters.ordering?"this asc":"-price"==t.filters.ordering?"this desc":"",on:{click:function(e){return t.select_ordering("price")}}},[t._v("价格")])]),t._v(" "),s("p",{staticClass:"condition-result"},[t._v("共"+t._s(t.course_total)+"个课程")])])]),t._v(" "),s("div",{staticClass:"course-list"},t._l(t.course_list,function(e){return s("div",{staticClass:"course-item"},[s("div",{staticClass:"course-image"},[s("img",{attrs:{src:e.course_img,alt:""}})]),t._v(" "),s("div",{staticClass:"course-info"},[s("h3",[s("router-link",{attrs:{to:"/courses/"+e.id}},[t._v(t._s(e.name))]),t._v(" "),s("span",[s("img",{attrs:{src:"/static/image/avatar1.svg",alt:""}}),t._v(t._s(e.students)+"人已加入学习")])],1),t._v(" "),s("p",{staticClass:"teather-info"},[t._v(t._s(e.teacher.role_name)+" "+t._s(e.teacher.name)+" "+t._s(e.teacher.signature)+" "+t._s(e.teacher.title)+" "),s("span",[t._v("共"+t._s(e.lessons)+"课时/"+t._s(e.lessons==e.pub_lessons?"更新完成":"已更新"+e.pub_lessons+"课时"))])]),t._v(" "),s("ul",{staticClass:"lesson-list"},t._l(e.recomment_lessons,function(e,a){return s("li",[s("span",{staticClass:"lesson-title"},[t._v("0"+t._s(a+1)+" | 第"+t._s(e.id)+"节："+t._s(e.name))]),t._v(" "),e.free_trail?s("span",{staticClass:"free"},[t._v("免费")]):t._e()])}),0),t._v(" "),s("div",{staticClass:"pay-box"},[e.discount_name?s("span",{staticClass:"discount-type"},[t._v(t._s(e.discount_name))]):t._e(),t._v(" "),e.discount_name?s("span",{staticClass:"discount-price"},[t._v("￥"+t._s(e.discount_price)+"元")]):s("span",{staticClass:"discount-price"},[t._v("￥"+t._s(e.price)+"元")]),t._v(" "),e.discount_name?s("span",{staticClass:"original-price"},[t._v("原价："+t._s(e.price)+"元")]):t._e(),t._v(" "),s("span",{staticClass:"buy-now"},[t._v("立即购买")])])])])}),0),t._v(" "),t.course_total>1?s("el-pagination",{attrs:{background:"","page-size":t.filters.size,"page-sizes":[2,5,10,20],layout:"sizes, prev, pager, next","current-page":t.filters.page,total:t.course_total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),s("Footer")],1)},staticRenderFns:[]};var A=s("VU/8")(w,H,!1,function(t){s("ql2G")},"data-v-33d76780",null).exports,S=s("iqGf"),I=s.n(S),E={name:"Detail",data:function(){return{course_id:0,course:{teacher:{}},chapter_list:[],tabIndex:2,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:"http://img.ksbbs.com/asset/Mon_1703/05cacb4e02f9d9e.mp4"}],poster:"../static/image/course-cover.jpeg",width:document.documentElement.clientWidth,notSupportedMessage:"此视频暂无法播放，请稍后再试"}}},filters:{padding0:function(t){return t>=10?t:"0"+t}},created:function(){this.course_id=this.$route.params.id,this.get_course(),this.get_chapter()},methods:{onPlayerPlay:function(){alert("开始播放视频，关闭广告")},onPlayerPause:function(){alert("暂停播放广告")},get_course:function(){var t=this;this.$axios.get(this.$settings.Host+"/courses/"+this.course_id+"/").then(function(e){t.course=e.data,console.log(e.data.course_video),t.playerOptions.sources[0].src=e.data.course_video;var s=setInterval(function(){t.course.has_time>0?t.course.has_time-=1:clearInterval(s)},1e3)}).catch(function(e){var s=t;t.$alert("无法获取当前课程信息，请联系客服工作人员","路飞学城",{callback:function(){s.$router.back()}})})},get_chapter:function(){var t=this;this.$axios.get(this.$settings.Host+"/courses/chapters/",{params:{course:this.course_id}}).then(function(e){t.chapter_list=e.data}).catch(function(e){t.$message.info("没有获取到当前课程的章节信息")})},url_format:function(t){for(console.log(t);-1!=t.search('="/media');)t=t.replace('="/media','="'+this.$settings.Host+"/media");return t},add_cart:function(){var t=this,e=this.$settings.check_user_login();if(e)this.$axios.post(this.$settings.Host+"/cart/",{course_id:this.course_id},{headers:{Authorization:"jwt "+e}}).then(function(e){t.$message.info(e.data.message)}).catch(function(e){if(401!=e.response.status)t.$message.error("购物车添加商品失败！请联系客服工作人员！");else{var s=t;t.$confirm("对不起，您尚未登录，请登录后继续购买, 是否继续?","路飞学城",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$router.push("/login")}).catch(function(){})}});else{var s=this;this.$confirm("对不起，您尚未登录，请登录后继续购买, 是否继续?","路飞学城",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$router.push("/login")}).catch(function(){})}}},components:{Header:l,Footer:h,videoPlayer:S.videoPlayer}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail"},[s("Header"),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"course-info"},[s("div",{staticClass:"wrap-left"},[t.course.course_video?s("videoPlayer",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions},on:{play:function(e){return t.onPlayerPlay(e)},pause:function(e){return t.onPlayerPause(e)}}}):s("img",{attrs:{src:t.course.course_img,alt:""}})],1),t._v(" "),s("div",{staticClass:"wrap-right"},[s("h3",{staticClass:"course-name"},[t._v(t._s(t.course.name))]),t._v(" "),s("p",{staticClass:"data"},[t._v(t._s(t.course.students)+"人在学    课程总时长："+t._s(t.course.lessons)+"课时/"+t._s(t.course.lessons==t.course.pub_lessons?"更新完成":"已更新"+t.course.pub_lessons+"课时")+"    难度：初级")]),t._v(" "),t.course.has_time>0?s("div",{staticClass:"sale-time"},[s("p",{staticClass:"sale-type"},[t._v(t._s(t.course.discount_name))]),t._v(" "),s("p",{staticClass:"expire"},[t._v("距离结束：仅剩 "+t._s(t._f("padding0")(parseInt(t.course.has_time/86400)))+"天 "+t._s(t._f("padding0")(parseInt(t.course.has_time/3600%24)))+"小时 "+t._s(t._f("padding0")(parseInt(t.course.has_time/60%60)))+"分 "),s("span",{staticClass:"second"},[t._v(t._s(t._f("padding0")(t.course.has_time%60)))]),t._v(" 秒")])]):t._e(),t._v(" "),t.course.has_time>0?s("p",{staticClass:"course-price"},[s("span",[t._v("活动价")]),t._v(" "),s("span",{staticClass:"discount"},[t._v("¥"+t._s(t.course.discount_price))]),t._v(" "),s("span",{staticClass:"original"},[t._v("¥"+t._s(t.course.price))])]):s("div",{staticClass:"sale-time"},[s("p",{staticClass:"sale-type"},[t._v("价格 ¥ "+t._s(t.course.price))])]),t._v(" "),s("div",{staticClass:"buy"},[t._m(0),t._v(" "),s("div",{staticClass:"add-cart",on:{click:t.add_cart}},[s("img",{attrs:{src:"/static/image/cart-yellow.svg",alt:""}}),t._v("加入购物车")])])])]),t._v(" "),s("div",{staticClass:"course-tab"},[s("ul",{staticClass:"tab-list"},[s("li",{class:1==t.tabIndex?"active":"",on:{click:function(e){t.tabIndex=1}}},[t._v("详情介绍")]),t._v(" "),s("li",{class:2==t.tabIndex?"active":"",on:{click:function(e){t.tabIndex=2}}},[t._v("课程章节 "),s("span",{class:2!=t.tabIndex?"free":""},[t._v("(试学)")])]),t._v(" "),s("li",{class:3==t.tabIndex?"active":"",on:{click:function(e){t.tabIndex=3}}},[t._v("用户评论 (42)")]),t._v(" "),s("li",{class:4==t.tabIndex?"active":"",on:{click:function(e){t.tabIndex=4}}},[t._v("常见问题")])])]),t._v(" "),s("div",{staticClass:"course-content"},[s("div",{staticClass:"course-tab-list"},[1==t.tabIndex?s("div",{staticClass:"tab-item"},[s("div",{domProps:{innerHTML:t._s(t.url_format(t.course.brief))}})]):t._e(),t._v(" "),2==t.tabIndex?s("div",{staticClass:"tab-item"},[t._m(1),t._v(" "),t._l(t.chapter_list,function(e){return s("div",{staticClass:"chapter-item"},[s("p",{staticClass:"chapter-title"},[s("img",{attrs:{src:"/static/image/1.svg",alt:""}}),t._v("第"+t._s(e.chapter)+"章·"+t._s(e.name))]),t._v(" "),s("ul",{staticClass:"lesson-list"},t._l(e.lessons,function(a){return s("li",{staticClass:"lesson-item"},[s("p",{staticClass:"name"},[s("span",{staticClass:"index"},[t._v(t._s(e.chapter)+"-"+t._s(a.id))]),t._v(" "+t._s(a.name)),a.free_trail?s("span",{staticClass:"free"},[t._v("免费")]):t._e()]),t._v(" "),s("p",{staticClass:"time"},[t._v(t._s(a.duration)+" "),s("img",{attrs:{src:"/static/image/chapter-player.svg"}})]),t._v(" "),a.free_trail?s("button",{staticClass:"try"},[t._v("立即试学")]):s("button",{staticClass:"try"},[t._v("立即购买")])])}),0)])})],2):t._e(),t._v(" "),3==t.tabIndex?s("div",{staticClass:"tab-item"},[t._v("\n          用户评论\n        ")]):t._e(),t._v(" "),4==t.tabIndex?s("div",{staticClass:"tab-item"},[t._v("\n          常见问题\n        ")]):t._e()]),t._v(" "),s("div",{staticClass:"course-side"},[s("div",{staticClass:"teacher-info"},[t._m(2),t._v(" "),s("div",{staticClass:"teacher-content"},[s("div",{staticClass:"cont1"},[s("img",{attrs:{src:t.course.teacher.image}}),t._v(" "),s("div",{staticClass:"name"},[s("p",{staticClass:"teacher-name"},[t._v(t._s(t.course.teacher.name))]),t._v(" "),s("p",{staticClass:"teacher-title"},[t._v(t._s(t.course.teacher.title)+" "+t._s(t.course.teacher.signature))])])]),t._v(" "),s("p",{staticClass:"narrative"},[t._v(t._s(t.course.teacher.brief))])])])])])]),t._v(" "),s("Footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"buy-btn"},[e("button",{staticClass:"buy-now"},[this._v("立即购买")]),this._v(" "),e("button",{staticClass:"free"},[this._v("免费试学")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tab-item-title"},[e("p",{staticClass:"chapter"},[this._v("课程章节")]),this._v(" "),e("p",{staticClass:"chapter-length"},[this._v("共11章 147个课时")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{staticClass:"side-title"},[e("span",[this._v("授课老师")])])}]};var U=s("VU/8")(E,F,!1,function(t){s("uqMY")},"data-v-3966e228",null).exports,R=s("BO1k"),P=s.n(R),j={name:"CartItem",props:["course"],data:function(){return{checked:!1}},created:function(){this.user_token=this.$settings.check_user_login()},watch:{"course.selected":function(){this.change_selected_status()},"course.expire":function(){this.change_course_expire()}},methods:{change_course_expire:function(){var t=this,e=!0,s=!1,a=void 0;try{for(var i,r=P()(this.course.expire_list);!(e=(i=r.next()).done);e=!0){var n=i.value;this.course.expire==n.time&&(this.course.price=n.price)}}catch(t){s=!0,a=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw a}}this.$axios.put(this.$settings.Host+"/cart/",{course_id:this.course.course_id,time:this.course.expire},{headers:{Authorization:"jwt "+this.user_token}}).then(function(e){t.$emit("change_course",t.course)}).catch(function(e){t.$message.error("切换有效期选项失败！无法请求服务端，请联系客服工作人员！")})},change_selected_status:function(){var t=this;this.$axios.patch(this.$settings.Host+"/cart/",{course_id:this.course.course_id,selected:this.course.selected},{headers:{Authorization:"jwt "+this.user_token}}).then(function(e){t.$emit("change_course",t.course)}).catch(function(e){t.$message.error("勾选状态切换失败！请刷新页面后重新尝试！")})},cart_delete:function(){var t=this;this.$confirm("您确定要删除当前商品<"+this.course.course_name+">么？","路飞学城",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteHandler()}).catch(function(){})},deleteHandler:function(){var t=this;this.$axios.delete(this.$settings.Host+"/cart/",{params:{course_id:this.course.course_id},headers:{Authorization:"jwt "+this.user_token}}).then(function(e){t.$emit("delete_cart"),t.$message.success("操作成功！")}).catch(function(e){t.$message.error("操作失败！")})}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart_item"},[s("div",{staticClass:"cart_column column_1"},[s("el-checkbox",{staticClass:"my_el_checkbox",model:{value:t.course.selected,callback:function(e){t.$set(t.course,"selected",e)},expression:"course.selected"}})],1),t._v(" "),s("div",{staticClass:"cart_column column_2"},[s("img",{attrs:{src:t.$settings.Host+t.course.course_img,alt:""}}),t._v(" "),s("span",[s("router-link",{attrs:{to:"/courses/"+t.course.course_id}},[t._v(t._s(t.course.course_name))])],1)]),t._v(" "),s("div",{staticClass:"cart_column column_3"},[s("el-select",{staticClass:"my_el_select",attrs:{size:"mini",placeholder:"请选择购买有效期"},model:{value:t.course.expire,callback:function(e){t.$set(t.course,"expire",e)},expression:"course.expire"}},t._l(t.course.expire_list,function(t){return s("el-option",{key:t.time,attrs:{label:t.text,value:t.time}})}),1)],1),t._v(" "),s("div",{staticClass:"cart_column column_4"},[t._v("¥"+t._s(t.course.price))]),t._v(" "),s("div",{staticClass:"cart_column column_4"},[s("span",{on:{click:t.cart_delete}},[t._v("删除")])])])},staticRenderFns:[]};var V={name:"Cart",data:function(){return{user_token:"",checked:!1,course_list:[],total:0}},created:function(){if(this.user_token=this.$settings.check_user_login(),this.user_token)this.get_cart();else{var t=this;this.$alert("请登录以后再访问！","路飞学城",{callback:function(){t.$router.push("/login")}})}},methods:{get_cart:function(){var t=this;this.$axios.get(this.$settings.Host+"/cart/",{headers:{Authorization:"jwt "+this.user_token}}).then(function(e){t.course_list=e.data,t.calc_cart_total_price()}).catch(function(e){t.$message.error("无法获取购物车商品列表，请联系客服工作人员！")})},deleteHandler:function(t){this.course_list.splice(t,1)},calc_cart_total_price:function(){var t=0,e=!0,s=!1,a=void 0;try{for(var i,r=P()(this.course_list);!(e=(i=r.next()).done);e=!0){var n=i.value;n.selected&&(t+=parseFloat(n.price))}}catch(t){s=!0,a=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw a}}this.total=t},change_course:function(t){var e=this;this.course_list.forEach(function(s,a){s.course_id==t.course_id&&(e.course_list[a]=t)}),this.calc_cart_total_price()}},components:{Header:l,Footer:h,CartItem:s("VU/8")(j,z,!1,function(t){s("Mogz")},"data-v-4c9d1e18",null).exports}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart"},[s("Header"),t._v(" "),s("div",{staticClass:"cart_info"},[s("div",{staticClass:"cart_title"},[s("span",{staticClass:"text"},[t._v("我的购物车")]),t._v(" "),s("span",{staticClass:"total"},[t._v("共"+t._s(t.course_list.length)+"门课程")])]),t._v(" "),s("div",{staticClass:"cart_table"},[t._m(0),t._v(" "),s("div",{staticClass:"cart_course_list"},t._l(t.course_list,function(e,a){return s("CartItem",{key:a,attrs:{course:e},on:{delete_cart:function(e){return t.deleteHandler(a)},change_course:t.change_course}})}),1),t._v(" "),s("div",{staticClass:"cart_footer_row"},[s("span",{staticClass:"cart_select"},[s("label",[s("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}),s("span",[t._v("全选")])],1)]),t._v(" "),t._m(1),t._v(" "),s("span",{staticClass:"goto_pay"},[s("router-link",{attrs:{to:"/buy"}},[t._v("去结算")])],1),t._v(" "),s("span",{staticClass:"cart_total"},[t._v("总计：¥"+t._s(t.total.toFixed(2)))])])])]),t._v(" "),s("Footer")],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart_head_row"},[s("span",{staticClass:"doing_row"}),t._v(" "),s("span",{staticClass:"course_row"},[t._v("课程")]),t._v(" "),s("span",{staticClass:"expire_row"},[t._v("有效期")]),t._v(" "),s("span",{staticClass:"price_row"},[t._v("单价")]),t._v(" "),s("span",{staticClass:"do_more"},[t._v("操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"cart_delete"},[e("i",{staticClass:"el-icon-delete"}),this._v(" "),e("span",[this._v("删除")])])}]};var q=s("VU/8")(V,M,!1,function(t){s("KwUq")},"data-v-3c7658df",null).exports,O={name:"Order",data:function(){return{user_token:"",course_list:[],total_price:0,total_real_price:0,sale_price:0,use_coupon:!1,use_credit:!1,coupon_list:[],coupon:0,coupon_price:0,my_credit:sessionStorage.user_credit||localStorage.user_credit,credit_rmb:sessionStorage.credit_rmb||localStorage.credit_rmb,current_credit:0,credit_price:0,pay_type:1}},components:{Header:l,Footer:h},created:function(){this.user_token=this.$settings.check_user_login(),this.get_selected_course(),this.get_user_coupon()},watch:{coupon:function(){this.calc_total_price()},use_coupon:function(){this.use_coupon||(this.coupon=0)},current_credit:function(){this.calc_total_price()},use_credit:function(){this.current_credit=0,this.calc_total_price()}},methods:{has_time:function(t,e){var s=(new Date(t)-0)/1e3,a=new Date(1e3*(s+24*e*3600)),i=a.getFullYear(),r=a.getMonth()+1;r=r>=10?r:"0"+r;var n=a.getDate();n=n>=10?n:"0"+n;var c=a.getHours();c=c>=10?c:"0"+c;var o=a.getMinutes();o=o>=10?o:"0"+o;var l=a.getSeconds();return i+"-"+r+"-"+n+" "+c+":"+o+":"+(l=l>=10?l:"0"+l)},get_user_coupon:function(){var t=this,e=localStorage.user_id||sessionStorage.user_id;this.$axios.get(this.$settings.Host+"/coupon/",{params:{user_id:e},headers:{Authorization:"jwt "+this.user_token}}).then(function(e){t.coupon_list=e.data}).catch(function(e){t.$message.error("获取优惠券列表失败！")})},get_selected_course:function(){var t=this;this.$axios.get(this.$settings.Host+"/cart/selected/",{headers:{Authorization:"jwt "+this.user_token}}).then(function(e){t.course_list=e.data;var s=0,a=!0,i=!1,r=void 0;try{for(var n,c=P()(t.course_list);!(a=(n=c.next()).done);a=!0){var o=n.value;s+=parseFloat(o.discount_price)}}catch(t){i=!0,r=t}finally{try{!a&&c.return&&c.return()}finally{if(i)throw r}}t.total_price=s,t.total_real_price=s-t.current_credit/t.credit_rmb}).catch(function(e){t.$message.error("无法获取商品信息！")})},ordeHander:function(){var t=this;this.$axios.post(this.$settings.Host+"/orders/",{pay_type:this.pay_type,credit:this.current_credit,coupon:this.coupon},{headers:{Authorization:"jwt "+this.user_token}}).then(function(e){var s=e.data.order_number;t.payhander(s)}).catch(function(e){t.$message.error("生成订单失败！")})},payhander:function(t){var e=this;this.$axios.get(this.$settings.Host+"/payments/alipay/",{params:{order_number:t},headers:{Authorization:"jwt "+this.user_token}}).then(function(t){console.log(t.data.url)}).catch(function(t){e.$message.error("对不起，网络繁忙，请稍后在个人中心订单列表中完成支付！")})},check_coupon:function(t,e){var s=new Date-0,a=new Date(t)-0+24*e*3600*1e3;return new Date(t)>s||a<=s},click_coupon:function(t){this.check_coupon(t.start_time,t.coupon.duration)||this.total_price<t.coupon.condition||this.total_real_price<t.coupon.condition||(this.coupon=t.id)},max_credit:function(t,e){var s=(e-this.sale_price)*this.credit_rmb;return t<s?t:parseInt(s)},calc_total_price:function(){if(this.coupon>0){var t=!0,e=!1,s=void 0;try{for(var a,i=P()(this.coupon_list);!(t=(a=i.next()).done);t=!0){var r=a.value;if(r.id==this.coupon){var n=parseFloat(r.coupon.sale.substr(1));"*"==r.coupon.sale[0]?(this.total_real_price=this.total_price*n,this.sale_price=this.total_price*(1-n)):(this.total_real_price=this.total_price-n,this.sale_price=n)}}}catch(t){e=!0,s=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw s}}}else this.total_real_price=this.total_price,this.sale_price=0;this.total_real_price=this.total_real_price-this.current_credit/this.credit_rmb}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("Header"),t._v(" "),a("div",{staticClass:"cart-info"},[a("h3",{staticClass:"cart-top"},[t._v("购物车结算 "),a("span",[t._v("共"+t._s(t.course_list.length)+"门课程")])]),t._v(" "),a("div",{staticClass:"cart-title"},[a("el-row",[a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:10}},[t._v("课程")]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("有效期")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("价格")])],1)],1),t._v(" "),a("div",{staticClass:"cart-item"},t._l(t.course_list,function(e,s){return a("el-row",{key:s},[a("el-col",{staticClass:"checkbox",attrs:{span:2}},[t._v("  ")]),t._v(" "),a("el-col",{staticClass:"course-info",attrs:{span:10}},[a("img",{attrs:{src:t.$settings.Host+e.course_img,alt:""}}),t._v(" "),a("span",{staticClass:"course-title"},[t._v(t._s(e.name)),a("br"),t._v(t._s(e.discount_name))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",[t._v(t._s(e.expire))])]),t._v(" "),a("el-col",{staticClass:"course-price",attrs:{span:4}},[t._v("¥"+t._s(e.discount_price)),a("br"),a("span",[t._v("原价 ¥"+t._s(e.price.toFixed(2)))])])],1)}),1),t._v(" "),a("div",{staticClass:"discount"},[a("div",{attrs:{id:"accordion"}},[a("div",{staticClass:"coupon-box"},[a("div",{staticClass:"icon-box"},[a("span",{staticClass:"select-coupon"},[t._v("使用优惠劵：")]),t._v(" "),a("a",{staticClass:"select-icon",on:{click:function(e){t.use_coupon=!t.use_coupon}}},[a("img",{staticClass:"sign",class:t.use_coupon?"is_show_select":"",attrs:{src:s("YUbx"),alt:""}})]),t._v(" "),a("span",{staticClass:"coupon-num"},[t._v("有"+t._s(t.coupon_list.length)+"张可用")])]),t._v(" "),a("p",{staticClass:"sum-price-wrap"},[t._v("商品总金额："),a("span",{staticClass:"sum-price"},[t._v(t._s(t.total_price.toFixed(2))+"元")])])]),t._v(" "),t.use_coupon?a("div",{attrs:{id:"collapseOne"}},[a("ul",{staticClass:"coupon-list"},t._l(t.coupon_list,function(e){return a("li",{staticClass:"coupon-item",class:{active:t.coupon==e.id,disable:t.check_coupon(e.start_time,e.coupon.duration)||t.total_price<e.coupon.condition||t.total_real_price<e.coupon.condition},on:{click:function(s){return t.click_coupon(e)}}},[a("p",{staticClass:"coupon-name"},[t._v(t._s(e.coupon.name))]),t._v(" "),a("p",{staticClass:"coupon-condition"},[t._v("满"+t._s(e.coupon.condition)+"元可以使用")]),t._v(" "),a("p",{staticClass:"coupon-time start_time"},[t._v("开始时间："+t._s(e.start_time.replace("T"," ")))]),t._v(" "),a("p",{staticClass:"coupon-time end_time"},[t._v("过期时间："+t._s(t.has_time(e.start_time,e.coupon.duration)))])])}),0),t._v(" "),t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"credit-box"},[a("label",{staticClass:"my_el_check_box"},[a("el-checkbox",{staticClass:"my_el_checkbox",model:{value:t.use_credit,callback:function(e){t.use_credit=e},expression:"use_credit"}})],1),t._v(" "),t.use_credit?t._e():a("p",{staticClass:"discount-num1"},[t._v("使用我的贝里")]),t._v(" "),t.use_credit?a("p",{staticClass:"discount-num2"},[a("span",[t._v("总积分："+t._s(t.my_credit-t.current_credit)+"，可以抵扣 "),a("el-input-number",{attrs:{min:0,max:t.max_credit(t.my_credit,t.total_price),size:"mini"},model:{value:t.current_credit,callback:function(e){t.current_credit=e},expression:"current_credit"}}),t._v(" 积分， 已抵扣￥"+t._s(t.current_credit/t.credit_rmb)+"元")],1)]):t._e()]),t._v(" "),a("p",{staticClass:"sun-coupon-num"},[t._v("优惠券抵扣："),a("span",[t._v(t._s(t.sale_price.toFixed(2))+"元")])])]),t._v(" "),a("div",{staticClass:"calc"},[a("el-row",{staticClass:"pay-row"},[a("el-col",{staticClass:"pay-col",attrs:{span:4}},[a("span",{staticClass:"pay-text"},[t._v("支付方式：")])]),t._v(" "),a("el-col",{attrs:{span:8}},[1!=t.pay_type?a("span",{staticClass:"alipay",on:{click:function(e){t.pay_type=1}}},[a("img",{attrs:{src:s("jk0e"),alt:"支付宝"}})]):t._e(),t._v(" "),1==t.pay_type?a("span",{staticClass:"alipay"},[a("img",{attrs:{src:s("IL0/"),alt:"支付宝"}})]):t._e(),t._v(" "),2!=t.pay_type?a("span",{staticClass:"alipay wechat",on:{click:function(e){t.pay_type=2}}},[a("img",{attrs:{src:s("Kmht"),alt:"微信支付"}})]):t._e(),t._v(" "),2==t.pay_type?a("span",{staticClass:"alipay wechat"},[a("img",{attrs:{src:s("mMSA"),alt:"微信支付"}})]):t._e()]),t._v(" "),a("el-col",{staticClass:"count",attrs:{span:8}},[t._v("实付款： "),a("span",[t._v("¥"+t._s(t.total_real_price.toFixed(2)))])]),t._v(" "),a("el-col",{staticClass:"cart-pay",attrs:{span:4}},[a("span",{on:{click:t.ordeHander}},[t._v("立即支付")])])],1)],1)]),t._v(" "),a("Footer")],1)},staticRenderFns:[]};var B=s("VU/8")(O,L,!1,function(t){s("tf2a")},"data-v-2d9a9bce",null).exports,N={name:"Success",data:function(){return{result:{course_data_list:[],pay_time:""},current_page:0}},created:function(){var t=this;this.$axios.get(this.$settings.Host+"/payments/alipay/result/"+location.search).then(function(e){t.result=e.data}).catch(function(e){t.$message.error("无法获取支付结果！支付失败或者参数无效！")})},components:{Header:l,Footer:h}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"success"},[s("Header"),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"title"},[s("div",{staticClass:"success-tips"},[s("p",{staticClass:"tips1"},[t._v("您已成功购买 "+t._s(t.result.course_data_list.length)+" 门课程！")]),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"order-info"},[s("p",{staticClass:"info1"},[s("b",[t._v("付款时间：")]),s("span",[t._v(t._s(t.result.pay_time.replace("T"," ")))])]),t._v(" "),s("p",{staticClass:"info2"},[s("b",[t._v("付款金额：")]),s("span",[t._v(t._s(t.result.real_price))])]),t._v(" "),s("p",{staticClass:"info3"},[s("b",[t._v("课程信息：")]),s("span",t._l(t.result.course_data_list,function(e){return s("span",[s("router-link",{attrs:{to:"/courses/"+e.course_id}},[t._v("《"+t._s(e.course_name)+"》")])],1)}),0)])]),t._v(" "),s("div",{staticClass:"wechat-code"}),t._v(" "),t._m(1)]),t._v(" "),s("Footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"tips2"},[this._v("你还可以加入QQ群 "),e("span",[this._v("747556033")]),this._v(" 学习交流")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"study"},[e("span",[this._v("立即学习")])])}]};var G=s("VU/8")(N,T,!1,function(t){s("MPJl")},"data-v-df96d85e",null).exports,K={name:"User",data:function(){return{}},components:{Header:l,Footer:h}},W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Header"),this._v("\n  个人中心\n"),e("Footer")],1)},staticRenderFns:[]};var Y=s("VU/8")(K,W,!1,function(t){s("Vtyi")},"data-v-a4903c88",null).exports,D={name:"UserOrder",data:function(){return{user_token:"",order_list:[{order_courses:[{course:{}}]}]}},created:function(){this.user_token=this.$settings.check_user_login(),this.get_my_orders()},methods:{get_my_orders:function(){var t=this,e=localStorage.user_id||sessionStorage.user_id;this.$axios.get(this.$settings.Host+"/orders/list/",{params:{user_id:e},headers:{Authorization:"jwt "+this.user_token}}).then(function(e){t.order_list=e.data,console.log(t.order_list)}).catch(function(t){console.log(t.response)})},payhander:function(t){var e=this;this.$axios.get(this.$settings.Host+"/payments/alipay/",{params:{order_number:t},headers:{Authorization:"jwt "+this.user_token}}).then(function(t){location.href=t.data.url}).catch(function(t){e.$message.error("对不起，网络繁忙，请稍后在个人中心订单列表中完成支付！")})},cancalOrder:function(){}},components:{Header:l,Footer:h}},J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-order"},[s("Header"),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"banner"}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"user-data"},[t._m(1),t._v(" "),t._l(t.order_list,function(e){return s("div",{staticClass:"my-order-item"},[s("div",{staticClass:"user-data-header"},[s("span",{staticClass:"order-time"},[t._v(t._s(e.create_time))]),t._v(" "),s("span",{staticClass:"order-num"},[t._v("订单号：\n                    "),s("span",{staticClass:"my-older-number"},[t._v(t._s(e.order_number))])]),t._v(" "),0==e.order_status?s("span",{staticClass:"btn btn2",on:{click:function(s){return t.cancalOrder(e.order_number)}}},[t._v("去取消")]):t._e()]),t._v(" "),t._l(e.order_courses,function(a){return s("ul",{staticClass:"nav user-data-list"},[s("li",{staticClass:"order-info"},[s("img",{attrs:{src:a.course.course_img,alt:""}}),t._v(" "),s("div",{staticClass:"order-info-title"},[s("p",{staticClass:"course-title"},[t._v(t._s(a.course.name))]),t._v(" "),s("p",{staticClass:"price-service"},[t._v(t._s(a.discount_name))])])]),t._v(" "),s("li",{staticClass:"course-expire"},[t._v(t._s(a.expire_text))]),t._v(" "),s("li",{staticClass:"course-price"},[t._v(t._s(a.price))]),t._v(" "),s("li",{staticClass:"real-price"},[t._v(t._s(a.real_price))]),t._v(" "),s("li",{staticClass:"order-status"},[t._v(t._s(e.order_status_text))]),t._v(" "),s("li",{staticClass:"order-do"},[0==e.order_status?s("span",{staticClass:"btn btn2",on:{click:function(s){return t.payhander(e.order_number)}}},[t._v("去支付")]):t._e(),t._v(" "),1==e.order_status?s("span",{staticClass:"btn btn2"},[s("router-link",{attrs:{to:{path:"/player",query:{course:a.course.id}}}},[t._v("去学习")])],1):t._e()])])})],2)})],2)]),t._v(" "),s("Footer")],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile"},[s("div",{staticClass:"profile-info"},[s("div",{staticClass:"avatar"},[s("img",{staticClass:"newImg",attrs:{width:"100%",alt:"",src:"/static/image/logo@2x.png"}})]),t._v(" "),s("span",{staticClass:"user-name"},[t._v("Mixtea")]),t._v(" "),s("span",{staticClass:"user-job"},[t._v("深圳市 | 程序员")])]),t._v(" "),s("ul",{staticClass:"my-item"},[s("li",[t._v("我的账户")]),t._v(" "),s("li",{staticClass:"active"},[t._v("我的订单")]),t._v(" "),s("li",[t._v("个人资料")]),t._v(" "),s("li",[t._v("账号安全")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"nav"},[s("li",{staticClass:"order-info"},[t._v("订单")]),t._v(" "),s("li",{staticClass:"course-expire"},[t._v("有效期")]),t._v(" "),s("li",{staticClass:"course-price"},[t._v("课程价格")]),t._v(" "),s("li",{staticClass:"real-price"},[t._v("实付金额")]),t._v(" "),s("li",{staticClass:"order-status"},[t._v("交易状态")]),t._v(" "),s("li",{staticClass:"order-do"},[t._v("交易操作")])])}]};var Z=s("VU/8")(D,J,!1,function(t){s("q+W1")},"data-v-d3c59cfa",null).exports,X={name:"Player",data:function(){return{}},mounted:function(){var t=this.$settings.check_user_login(),e=localStorage.user_name||sessionStorage.user_name,s=this;if(t)polyvObject("#player").videoPlayer({wrap:"#player",width:document.documentElement.clientWidth-260,height:document.documentElement.clientHeight,forceH5:!0,vid:"0411ff75f685f81f5ed1a7af11810895_0",code:e,playsafe:function(e,a){s.$axios.get(s.$settings.Host+"/courses/player/",{params:{vid:e},headers:{Authorization:"jwt "+t}}).then(function(t){console.log(t),a(t.data)})}});else this.$alert("您尚未登录，请登录后再进行操作！","路飞学城",{callback:function(){s.$router.push("/login")}})},methods:{},computed:{}},Q={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"player"},[e("div",{attrs:{id:"player"}})])}]};var tt=s("VU/8")(X,Q,!1,function(t){s("yxZL")},"data-v-6bdf7f1e",null).exports;a.default.use(n.a);var et=new n.a({mode:"history",routes:[{path:"/",name:"Home",component:f},{name:"Home",path:"/home",component:f},{name:"Login",path:"/login",component:y},{name:"Register",path:"/register",component:$},{name:"Course",path:"/courses",component:A},{name:"Detail",path:"/courses/:id",component:U},{name:"Cart",path:"/cart",component:q},{name:"Order",path:"/buy",component:B},{path:"/payments/result",name:"Success",component:G},{name:"User",path:"/my",component:Y},{name:"UserOrder",path:"/my/order",component:Z},{path:"/player",name:"Player",component:tt}]}),st={Host:"http://api.lxh1.com",check_user_login:function(){return localStorage.user_token||sessionStorage.user_token}},at=s("zL8q"),it=s.n(at),rt=(s("tvR6"),s("mtWM")),nt=s.n(rt);s("EWIa");a.default.use(it.a),a.default.config.productionTip=!1,a.default.prototype.$settings=st,nt.a.defaults.withCredentials=!1,a.default.prototype.$axios=nt.a,s("g3Gj"),s("5LIk"),a.default.use(I.a),new a.default({el:"#app",router:et,components:{App:r},template:"<App/>"})},UplI:function(t,e){},Vtyi:function(t,e){},YUbx:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAMAAADCkShIAAAAflBMVEUAAABZV1ddW1u5uLje3d2BgIBbWVnf39/c29v+/v78/Pz39/ecm5t5d3daWFj7+/uioaFzcXFsa2tfXV3x8fHt7e3q6urX1tbKycnEw8PBwMC7urqnpqaZl5eTkpKRj4+NjIyKiYl/fX3R0dHPzs60s7OxsLCsq6uGhISEgoLZdRcuAAAAAXRSTlMAQObYZgAAAMRJREFUSMftldkKwjAQRXOqVrta7b641f3/f9AUKliKNgERH3qfsszJhJkLIww9hcJES4Y+4EM+VVTRZpgLRS1GYASUgcC1ujHWpvoAWC5s7dd4ewfue2B5APZLIboHdg/oPMjNeW6dO52UfUB+GahbwqkB1xqoUgB4UbOKPCAYLmsFrGIh4hVwVenDpSGSZA2c1Ro38WEt4/1StdOFiZSZq1sjM+RVpuOlUxge9cyXpv9i7xH4EuCDN1OUJ4EfTNGJnsoHRqYNbYhMgeoAAAAASUVORK5CYII="},"c+mq":function(t,e){},fpQj:function(t,e){},g3Gj:function(t,e){},iAV8:function(t,e){},jk0e:function(t,e,s){t.exports=s.p+"static/img/alipay.4504d75.png"},lKjY:function(t,e){},mMSA:function(t,e,s){t.exports=s.p+"static/img/wechat2.940da91.png"},nJG4:function(t,e){},"q+W1":function(t,e){},ql2G:function(t,e){},tf2a:function(t,e){},tvR6:function(t,e){},uqMY:function(t,e){},ymcE:function(t,e){},yxZL:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d554273db9d1042d6205.js.map